// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

// model sheet 

model Sheet {
  id                      String             @id @default(auto()) @map("_id") @db.ObjectId
  project_title           String
  number_of_student       Int
  introduction            String[]
  guidelines              String[]
  attachments             String[]
  optional_bonus_sections String?
  mandatory_sections      MandatorySection[]
  grading_options         GradingOption[]
  created_at              DateTime           @default(now())
  updated_at              DateTime           @updatedAt
}

model MandatorySection {
  id          String   @id @default(auto()) @map("_id") @db.ObjectId
  title       String
  description String[]
  yes_no      Boolean
  sheet       Sheet    @relation(fields: [sheetId], references: [id], onDelete: Cascade)
  sheetId     String   @db.ObjectId
  created_at  DateTime @default(now())
  updated_at  DateTime @updatedAt
}

model GradingOption {
  id                    String   @id @default(auto()) @map("_id") @db.ObjectId
  ok                    Boolean
  outstanding           Boolean
  empty_work            Boolean
  incomplete_work       Boolean
  invalid_compilation   Boolean
  norme                 Boolean
  cheat                 Boolean
  crash                 Boolean
  concerning_situations Boolean
  leaks                 Boolean
  forbidden_functions   Boolean
  cannot_support        Boolean
  sheet                 Sheet    @relation(fields: [sheetId], references: [id], onDelete: Cascade)
  sheetId               String   @db.ObjectId
  created_at            DateTime @default(now())
  updated_at            DateTime @updatedAt
}
